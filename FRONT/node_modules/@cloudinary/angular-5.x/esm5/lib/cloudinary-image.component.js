/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, EventEmitter, Input, Output, ContentChildren, QueryList, ContentChild, Renderer2, } from '@angular/core';
import { Cloudinary } from './cloudinary.service';
import { CloudinaryTransformationDirective } from './cloudinary-transformation.directive';
import { CloudinaryPlaceHolder } from './cloudinary-placeholder.component';
import { isBrowser } from './cloudinary.service';
import { SDKAnalyticsConstants } from './SDKAnalyticsConstants';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './cloudinary.service';
import * as ɵngcc2 from '@angular/common';

function CloudinaryImage_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div");
    ɵngcc0.ɵɵprojection(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("display", ctx_r0.shouldShowPlaceHolder ? "inline" : "none");
} }
var _c0 = ["*"];
var CloudinaryImage = /** @class */ (function () {
    function CloudinaryImage(el, cloudinary, renderer) {
        this.el = el;
        this.cloudinary = cloudinary;
        this.renderer = renderer;
        this.onLoad = new EventEmitter(); // Callback when an image is loaded successfully
        // Callback when an image is loaded successfully
        this.onError = new EventEmitter(); // Callback when an image is loaded with error
        this.shouldShowPlaceHolder = true;
        this.options = {};
    }
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (isBrowser()) {
            // Create an observer instance
            this.observer = new MutationObserver(function () {
                _this.loadImage();
            });
            // Observe changes to attributes or child transformations to re-render the image
            /** @type {?} */
            var config = { attributes: true, childList: true };
            // pass in the target node, as well as the observer options
            this.observer.observe(this.el.nativeElement, config);
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    CloudinaryImage.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // Listen to changes on the data-bound property 'publicId'.
        // Update component unless this is the first value assigned.
        if (changes.publicId && !changes.publicId.isFirstChange()) {
            this.loadImage();
        }
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.observer && this.observer.disconnect) {
            this.observer.disconnect();
        }
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.loadImage();
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.ngAfterContentChecked = /**
     * @return {?}
     */
    function () {
        if (this.width && this.placeholderComponent) {
            this.placeholderComponent.setWidth(this.width);
        }
        if (this.height && this.placeholderComponent) {
            this.placeholderComponent.setHeight(this.height);
        }
        if (this.placeholderComponent) {
            this.placeholderComponent.setPublicId(this.publicId);
        }
    };
    /**
     * appends opacity and position to cl-img->img when placeholder is displayed
     * removes styling from cl-img->img when placeholder does not display
     */
    /**
     * appends opacity and position to cl-img->img when placeholder is displayed
     * removes styling from cl-img->img when placeholder does not display
     * @return {?}
     */
    CloudinaryImage.prototype.setPlaceHolderStyle = /**
     * appends opacity and position to cl-img->img when placeholder is displayed
     * removes styling from cl-img->img when placeholder does not display
     * @return {?}
     */
    function () {
        if (this.shouldShowPlaceHolder) {
            this.renderer.setStyle(this.el.nativeElement.children[0], 'opacity', '0');
            this.renderer.setStyle(this.el.nativeElement.children[0], 'position', 'absolute');
        }
        else {
            // note this only removes styling from cl-img->img and not cl-img
            this.renderer.removeAttribute(this.el.nativeElement.children[0], 'style');
        }
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.hasLoaded = /**
     * @return {?}
     */
    function () {
        this.shouldShowPlaceHolder = false;
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.loadImage = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // https://github.com/angular/universal#universal-gotchas
        // Fetch the image only for client side rendering by the browser
        if (isBrowser()) {
            if (!this.publicId) {
                throw new Error('You must set the public id of the image to load, e.g. <cl-image public-id={{photo.public_id}}...></cl-image>');
            }
            /** @type {?} */
            var nativeElement = this.el.nativeElement;
            /** @type {?} */
            var image = nativeElement.children[0];
            // Add onload and onerror handlers
            image.onload = function (e) {
                _this.onLoad.emit(e);
            };
            image.onerror = function (e) {
                _this.onError.emit(e);
            };
            this.options = this.cloudinary.toCloudinaryAttributes(nativeElement.attributes, this.transformations);
            if (this.clientHints || (typeof this.clientHints === 'undefined' && this.cloudinary.config().client_hints)) {
                delete this.options['class'];
                delete this.options['data-src'];
                delete this.options['responsive'];
            }
            if (this.cloudinary.config().urlAnalytics) {
                this.options = tslib_1.__assign({}, SDKAnalyticsConstants, this.options);
            }
            if (this.placeholderComponent) {
                this.placeholderHandler(this.options, image);
            }
            if (this.accessibility) {
                this.options['src'] = this.accessibilityModeHandler();
            }
            /** @type {?} */
            var imageTag = this.cloudinary.imageTag(this.publicId, this.options);
            this.setElementAttributes(image, imageTag.attributes());
            if (this.options['responsive']) {
                this.cloudinary.responsive(image, this.options);
            }
        }
    };
    /**
     * @param {?} element
     * @param {?} attributesLiteral
     * @return {?}
     */
    CloudinaryImage.prototype.setElementAttributes = /**
     * @param {?} element
     * @param {?} attributesLiteral
     * @return {?}
     */
    function (element, attributesLiteral) {
        var _this = this;
        Object.keys(attributesLiteral).forEach(function (attrName) {
            /** @type {?} */
            var attr = attrName === 'src' && _this.loading === 'lazy' ? 'data-src' : attrName;
            _this.renderer.setAttribute(element, attr, attributesLiteral[attrName]);
        });
        // Enforcing placeholder style
        if (this.placeholderComponent) {
            this.setPlaceHolderStyle();
        }
    };
    /**
     * Handles placeholder options
     * In case of responsive sets width from resize
     * In case width or height is known takes 10% of original dimension
     */
    /**
     * Handles placeholder options
     * In case of responsive sets width from resize
     * In case width or height is known takes 10% of original dimension
     * @param {?} options
     * @param {?} image
     * @return {?}
     */
    CloudinaryImage.prototype.placeholderHandler = /**
     * Handles placeholder options
     * In case of responsive sets width from resize
     * In case width or height is known takes 10% of original dimension
     * @param {?} options
     * @param {?} image
     * @return {?}
     */
    function (options, image) {
        /** @type {?} */
        var placeholderOptions = tslib_1.__assign({}, options);
        if (placeholderOptions['width']) {
            if (placeholderOptions['width'] === 'auto') {
                placeholderOptions['width'] = image.getAttribute('data-width');
            }
        }
        this.placeholderComponent.options = placeholderOptions;
    };
    /**
     * @return {?}
     */
    CloudinaryImage.prototype.accessibilityModeHandler = /**
     * @return {?}
     */
    function () {
        return this.cloudinary.url(this.publicId, tslib_1.__assign({ accessibility: this.accessibility }, this.options));
    };
    /** @nocollapse */
    CloudinaryImage.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Cloudinary },
        { type: Renderer2 }
    ]; };
    CloudinaryImage.propDecorators = {
        publicId: [{ type: Input, args: ['public-id',] }],
        clientHints: [{ type: Input, args: ['client-hints',] }],
        loading: [{ type: Input, args: ['loading',] }],
        width: [{ type: Input, args: ['width',] }],
        height: [{ type: Input, args: ['height',] }],
        accessibility: [{ type: Input, args: ['accessibility',] }],
        transformations: [{ type: ContentChildren, args: [CloudinaryTransformationDirective,] }],
        placeholderComponent: [{ type: ContentChild, args: [CloudinaryPlaceHolder,] }],
        onLoad: [{ type: Output }],
        onError: [{ type: Output }]
    };
CloudinaryImage.ɵfac = function CloudinaryImage_Factory(t) { return new (t || CloudinaryImage)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Cloudinary), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
CloudinaryImage.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CloudinaryImage, selectors: [["cl-image"]], contentQueries: function CloudinaryImage_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, CloudinaryPlaceHolder, 1);
        ɵngcc0.ɵɵcontentQuery(dirIndex, CloudinaryTransformationDirective, 0);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.placeholderComponent = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.transformations = _t);
    } }, inputs: { publicId: ["public-id", "publicId"], clientHints: ["client-hints", "clientHints"], loading: "loading", width: "width", height: "height", accessibility: "accessibility" }, outputs: { onLoad: "onLoad", onError: "onError" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c0, decls: 2, vars: 1, consts: [[3, "load"], [3, "display", 4, "ngIf"]], template: function CloudinaryImage_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "img", 0);
        ɵngcc0.ɵɵlistener("load", function CloudinaryImage_Template_img_load_0_listener() { return ctx.hasLoaded(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(1, CloudinaryImage_div_1_Template, 2, 2, "div", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.placeholderComponent && ctx.shouldShowPlaceHolder);
    } }, directives: [ɵngcc2.NgIf], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CloudinaryImage, [{
        type: Component,
        args: [{
                selector: 'cl-image',
                template: "<img (load)=\"hasLoaded()\">\n  <div *ngIf=\"placeholderComponent && shouldShowPlaceHolder\" [style.display]=\"shouldShowPlaceHolder ? 'inline' : 'none'\">\n    <ng-content></ng-content>\n  </div>\n  "
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc1.Cloudinary }, { type: ɵngcc0.Renderer2 }]; }, { onLoad: [{
            type: Output
        }], onError: [{
            type: Output
        }], publicId: [{
            type: Input,
            args: ['public-id']
        }], clientHints: [{
            type: Input,
            args: ['client-hints']
        }], loading: [{
            type: Input,
            args: ['loading']
        }], width: [{
            type: Input,
            args: ['width']
        }], height: [{
            type: Input,
            args: ['height']
        }], accessibility: [{
            type: Input,
            args: ['accessibility']
        }], transformations: [{
            type: ContentChildren,
            args: [CloudinaryTransformationDirective]
        }], placeholderComponent: [{
            type: ContentChild,
            args: [CloudinaryPlaceHolder]
        }] }); })();
    return CloudinaryImage;
}());
export { CloudinaryImage };
if (false) {
    /** @type {?} */
    CloudinaryImage.prototype.publicId;
    /** @type {?} */
    CloudinaryImage.prototype.clientHints;
    /** @type {?} */
    CloudinaryImage.prototype.loading;
    /** @type {?} */
    CloudinaryImage.prototype.width;
    /** @type {?} */
    CloudinaryImage.prototype.height;
    /** @type {?} */
    CloudinaryImage.prototype.accessibility;
    /** @type {?} */
    CloudinaryImage.prototype.transformations;
    /** @type {?} */
    CloudinaryImage.prototype.placeholderComponent;
    /** @type {?} */
    CloudinaryImage.prototype.onLoad;
    /** @type {?} */
    CloudinaryImage.prototype.onError;
    /** @type {?} */
    CloudinaryImage.prototype.observer;
    /** @type {?} */
    CloudinaryImage.prototype.shouldShowPlaceHolder;
    /** @type {?} */
    CloudinaryImage.prototype.options;
    /**
     * @type {?}
     * @private
     */
    CloudinaryImage.prototype.el;
    /**
     * @type {?}
     * @private
     */
    CloudinaryImage.prototype.cloudinary;
    /**
     * @type {?}
     * @private
     */
    CloudinaryImage.prototype.renderer;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWRpbmFyeS1pbWFnZS5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIkBjbG91ZGluYXJ5L2FuZ3VsYXItNS54L2xpYi9jbG91ZGluYXJ5LWltYWdlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLGVBQWUsRUFDZixTQUFTLEVBT1QsWUFBWSxFQUNaLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDMUYsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDM0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFPLHlCQUF5QixDQUFDOzs7Ozs7Ozs7Ozs7OztBQUVqRTtBQUVlLElBMkJiLHlCQUFvQixFQUFjLEVBQVUsVUFBc0IsRUFBVSxRQUFtQjtBQUNqRyxRQURzQixPQUFFLEdBQUYsRUFBRSxDQUFZO0FBQUUsUUFBUSxlQUFVLEdBQVYsVUFBVSxDQUFZO0FBQUUsUUFBUSxhQUFRLEdBQVIsUUFBUSxDQUFXO0FBQUUsUUFQdkYsV0FBTSxHQUEwQixJQUFJLFlBQVksRUFBRSxDQUFDLENBQUMsZ0RBQWdEO0FBQy9HO0FBQTBELFFBQS9DLFlBQU8sR0FBMEIsSUFBSSxZQUFZLEVBQUUsQ0FBQyxDQUFDLDhDQUE4QztBQUUvRyxRQUNFLDBCQUFxQixHQUFHLElBQUksQ0FBQztBQUM5QixRQUFDLFlBQU8sR0FBVyxFQUFFLENBQUM7QUFFdkIsSUFBb0csQ0FBQztBQUVyRztBQUFTO0FBQ0Q7QUFBUyxJQURmLGtDQUFRO0FBQVE7QUFDRDtBQUNkLElBRkQ7QUFB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QUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBUEEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFZQSxBQVhBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUdBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBNkNBLEFBNUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFVQSxBQVRBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBektBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBSUEsQUFDQSxBQTVCQSxBQUFBLEFBZUEsQUFBQSxBQUZBLEFBQUEsQUFrQkEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBbUpBLEFBQUEsQUFBQSxBQTFLQSxBQTBLQSxBQWxLQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBRUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIFF1ZXJ5TGlzdCxcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQWZ0ZXJDb250ZW50Q2hlY2tlZCxcbiAgT25Jbml0LFxuICBPbkNoYW5nZXMsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgQ29udGVudENoaWxkLFxuICBSZW5kZXJlcjIsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ2xvdWRpbmFyeSB9IGZyb20gJy4vY2xvdWRpbmFyeS5zZXJ2aWNlJztcbmltcG9ydCB7IENsb3VkaW5hcnlUcmFuc2Zvcm1hdGlvbkRpcmVjdGl2ZSB9IGZyb20gJy4vY2xvdWRpbmFyeS10cmFuc2Zvcm1hdGlvbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQ2xvdWRpbmFyeVBsYWNlSG9sZGVyIH0gZnJvbSAnLi9jbG91ZGluYXJ5LXBsYWNlaG9sZGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuL2Nsb3VkaW5hcnkuc2VydmljZSc7XG5pbXBvcnQgeyBTREtBbmFseXRpY3NDb25zdGFudHMgfSAgZnJvbSAnLi9TREtBbmFseXRpY3NDb25zdGFudHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjbC1pbWFnZScsXG4gIHRlbXBsYXRlOiBgPGltZyAobG9hZCk9XCJoYXNMb2FkZWQoKVwiPlxuICA8ZGl2ICpuZ0lmPVwicGxhY2Vob2xkZXJDb21wb25lbnQgJiYgc2hvdWxkU2hvd1BsYWNlSG9sZGVyXCIgW3N0eWxlLmRpc3BsYXldPVwic2hvdWxkU2hvd1BsYWNlSG9sZGVyID8gJ2lubGluZScgOiAnbm9uZSdcIj5cbiAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gIDwvZGl2PlxuICBgLFxufSlcbmV4cG9ydCBjbGFzcyBDbG91ZGluYXJ5SW1hZ2VcbiAgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkluaXQsIEFmdGVyVmlld0luaXQsIEFmdGVyQ29udGVudENoZWNrZWQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KCdwdWJsaWMtaWQnKSBwdWJsaWNJZDogc3RyaW5nO1xuICBASW5wdXQoJ2NsaWVudC1oaW50cycpIGNsaWVudEhpbnRzPzogYm9vbGVhbjtcbiAgQElucHV0KCdsb2FkaW5nJykgbG9hZGluZzogc3RyaW5nO1xuICBASW5wdXQoJ3dpZHRoJykgd2lkdGg/OiBzdHJpbmc7XG4gIEBJbnB1dCgnaGVpZ2h0JykgaGVpZ2h0Pzogc3RyaW5nO1xuXG4gIEBJbnB1dCgnYWNjZXNzaWJpbGl0eScpIGFjY2Vzc2liaWxpdHk/OiBzdHJpbmc7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihDbG91ZGluYXJ5VHJhbnNmb3JtYXRpb25EaXJlY3RpdmUpXG4gIHRyYW5zZm9ybWF0aW9uczogUXVlcnlMaXN0PENsb3VkaW5hcnlUcmFuc2Zvcm1hdGlvbkRpcmVjdGl2ZT47XG4gIEBDb250ZW50Q2hpbGQoQ2xvdWRpbmFyeVBsYWNlSG9sZGVyKSBwbGFjZWhvbGRlckNvbXBvbmVudDogQ2xvdWRpbmFyeVBsYWNlSG9sZGVyO1xuXG4gIEBPdXRwdXQoKSBvbkxvYWQ6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy8gQ2FsbGJhY2sgd2hlbiBhbiBpbWFnZSBpcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5XG4gIEBPdXRwdXQoKSBvbkVycm9yOiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vIENhbGxiYWNrIHdoZW4gYW4gaW1hZ2UgaXMgbG9hZGVkIHdpdGggZXJyb3JcblxuICBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcbiAgc2hvdWxkU2hvd1BsYWNlSG9sZGVyID0gdHJ1ZTtcbiAgb3B0aW9uczogb2JqZWN0ID0ge307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSBjbG91ZGluYXJ5OiBDbG91ZGluYXJ5LCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2VcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZEltYWdlKCk7XG4gICAgICB9KTtcbiAgICAgIC8vIE9ic2VydmUgY2hhbmdlcyB0byBhdHRyaWJ1dGVzIG9yIGNoaWxkIHRyYW5zZm9ybWF0aW9ucyB0byByZS1yZW5kZXIgdGhlIGltYWdlXG4gICAgICBjb25zdCBjb25maWcgPSB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSB9O1xuXG4gICAgICAvLyBwYXNzIGluIHRoZSB0YXJnZXQgbm9kZSwgYXMgd2VsbCBhcyB0aGUgb2JzZXJ2ZXIgb3B0aW9uc1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgY29uZmlnKTtcbiAgICB9XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgLy8gTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGRhdGEtYm91bmQgcHJvcGVydHkgJ3B1YmxpY0lkJy5cbiAgICAvLyBVcGRhdGUgY29tcG9uZW50IHVubGVzcyB0aGlzIGlzIHRoZSBmaXJzdCB2YWx1ZSBhc3NpZ25lZC5cbiAgICBpZiAoY2hhbmdlcy5wdWJsaWNJZCAmJiAhY2hhbmdlcy5wdWJsaWNJZC5pc0ZpcnN0Q2hhbmdlKCkpIHtcbiAgICAgIHRoaXMubG9hZEltYWdlKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIgJiYgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KSB7XG4gICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5sb2FkSW1hZ2UoKTtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICBpZiAodGhpcy53aWR0aCAmJiB0aGlzLnBsYWNlaG9sZGVyQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLnBsYWNlaG9sZGVyQ29tcG9uZW50LnNldFdpZHRoKHRoaXMud2lkdGgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5oZWlnaHQgJiYgdGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudCkge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudC5zZXRIZWlnaHQodGhpcy5oZWlnaHQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudCkge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudC5zZXRQdWJsaWNJZCh0aGlzLnB1YmxpY0lkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogYXBwZW5kcyBvcGFjaXR5IGFuZCBwb3NpdGlvbiB0byBjbC1pbWctPmltZyB3aGVuIHBsYWNlaG9sZGVyIGlzIGRpc3BsYXllZFxuICAgKiByZW1vdmVzIHN0eWxpbmcgZnJvbSBjbC1pbWctPmltZyB3aGVuIHBsYWNlaG9sZGVyIGRvZXMgbm90IGRpc3BsYXlcbiAgICovXG4gIHNldFBsYWNlSG9sZGVyU3R5bGUoKSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkU2hvd1BsYWNlSG9sZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5jaGlsZHJlblswXSwgJ29wYWNpdHknLCAnMCcgKTtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuWzBdLCAncG9zaXRpb24nLCAnYWJzb2x1dGUnICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vdGUgdGhpcyBvbmx5IHJlbW92ZXMgc3R5bGluZyBmcm9tIGNsLWltZy0+aW1nIGFuZCBub3QgY2wtaW1nXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW5bMF0sICdzdHlsZScpO1xuICAgIH1cbiAgfVxuXG4gIGhhc0xvYWRlZCgpIHtcbiAgICB0aGlzLnNob3VsZFNob3dQbGFjZUhvbGRlciA9IGZhbHNlO1xuICB9XG5cbiAgbG9hZEltYWdlKCkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3VuaXZlcnNhbCN1bml2ZXJzYWwtZ290Y2hhc1xuICAgIC8vIEZldGNoIHRoZSBpbWFnZSBvbmx5IGZvciBjbGllbnQgc2lkZSByZW5kZXJpbmcgYnkgdGhlIGJyb3dzZXJcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgIGlmICghdGhpcy5wdWJsaWNJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1lvdSBtdXN0IHNldCB0aGUgcHVibGljIGlkIG9mIHRoZSBpbWFnZSB0byBsb2FkLCBlLmcuIDxjbC1pbWFnZSBwdWJsaWMtaWQ9e3twaG90by5wdWJsaWNfaWR9fS4uLj48L2NsLWltYWdlPidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5hdGl2ZUVsZW1lbnQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICBjb25zdCBpbWFnZSA9IG5hdGl2ZUVsZW1lbnQuY2hpbGRyZW5bMF07XG4gICAgICAvLyBBZGQgb25sb2FkIGFuZCBvbmVycm9yIGhhbmRsZXJzXG4gICAgICBpbWFnZS5vbmxvYWQgPSBlID0+IHtcbiAgICAgICAgdGhpcy5vbkxvYWQuZW1pdChlKTtcbiAgICAgIH07XG4gICAgICBpbWFnZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgIHRoaXMub25FcnJvci5lbWl0KGUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuY2xvdWRpbmFyeS50b0Nsb3VkaW5hcnlBdHRyaWJ1dGVzKFxuICAgICAgICBuYXRpdmVFbGVtZW50LmF0dHJpYnV0ZXMsXG4gICAgICAgIHRoaXMudHJhbnNmb3JtYXRpb25zXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuY2xpZW50SGludHMgfHwgKHR5cGVvZiB0aGlzLmNsaWVudEhpbnRzID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLmNsb3VkaW5hcnkuY29uZmlnKCkuY2xpZW50X2hpbnRzKSkge1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zWydjbGFzcyddO1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zWydkYXRhLXNyYyddO1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zWydyZXNwb25zaXZlJ107XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jbG91ZGluYXJ5LmNvbmZpZygpLnVybEFuYWx5dGljcykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7Li4uU0RLQW5hbHl0aWNzQ29uc3RhbnRzLCAuLi50aGlzLm9wdGlvbnN9O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudCkge1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVySGFuZGxlcih0aGlzLm9wdGlvbnMsIGltYWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYWNjZXNzaWJpbGl0eSkge1xuICAgICAgICB0aGlzLm9wdGlvbnNbJ3NyYyddID0gdGhpcy5hY2Nlc3NpYmlsaXR5TW9kZUhhbmRsZXIoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW1hZ2VUYWcgPSB0aGlzLmNsb3VkaW5hcnkuaW1hZ2VUYWcodGhpcy5wdWJsaWNJZCwgdGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMoaW1hZ2UsIGltYWdlVGFnLmF0dHJpYnV0ZXMoKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zWydyZXNwb25zaXZlJ10pIHtcbiAgICAgICAgdGhpcy5jbG91ZGluYXJ5LnJlc3BvbnNpdmUoaW1hZ2UsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0RWxlbWVudEF0dHJpYnV0ZXMoZWxlbWVudCwgYXR0cmlidXRlc0xpdGVyYWwpIHtcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzTGl0ZXJhbCkuZm9yRWFjaChhdHRyTmFtZSA9PiB7XG4gICAgICBjb25zdCBhdHRyID0gYXR0ck5hbWUgPT09ICdzcmMnICYmIHRoaXMubG9hZGluZyA9PT0gJ2xhenknID8gJ2RhdGEtc3JjJyA6IGF0dHJOYW1lO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0ciwgYXR0cmlidXRlc0xpdGVyYWxbYXR0ck5hbWVdKTtcbiAgICB9KTtcblxuICAgIC8vIEVuZm9yY2luZyBwbGFjZWhvbGRlciBzdHlsZVxuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLnNldFBsYWNlSG9sZGVyU3R5bGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBwbGFjZWhvbGRlciBvcHRpb25zXG4gICAqIEluIGNhc2Ugb2YgcmVzcG9uc2l2ZSBzZXRzIHdpZHRoIGZyb20gcmVzaXplXG4gICAqIEluIGNhc2Ugd2lkdGggb3IgaGVpZ2h0IGlzIGtub3duIHRha2VzIDEwJSBvZiBvcmlnaW5hbCBkaW1lbnNpb25cbiAgICovXG4gIHBsYWNlaG9sZGVySGFuZGxlcihvcHRpb25zLCBpbWFnZSkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyT3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgIGlmIChwbGFjZWhvbGRlck9wdGlvbnNbJ3dpZHRoJ10pIHtcbiAgICAgIGlmIChwbGFjZWhvbGRlck9wdGlvbnNbJ3dpZHRoJ10gPT09ICdhdXRvJykge1xuICAgICAgICBwbGFjZWhvbGRlck9wdGlvbnNbJ3dpZHRoJ10gPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2lkdGgnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wbGFjZWhvbGRlckNvbXBvbmVudC5vcHRpb25zID0gcGxhY2Vob2xkZXJPcHRpb25zO1xuICB9XG5cbiAgYWNjZXNzaWJpbGl0eU1vZGVIYW5kbGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNsb3VkaW5hcnkudXJsKHRoaXMucHVibGljSWQsIHthY2Nlc3NpYmlsaXR5OiB0aGlzLmFjY2Vzc2liaWxpdHksIC4uLnRoaXMub3B0aW9uc30pO1xuICB9XG59XG4iXX0=